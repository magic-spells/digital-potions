!function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={exports:{}};t.exports=class{constructor(e){this.setKeyframes(e),this.discreteProperties=["display","position","float","clear","visibility","overflow","overflow-x","overflow-y","flex-direction","flex-wrap","justify-content","align-items","align-content","order","grid-template-columns","grid-template-rows","grid-template-areas","grid-auto-flow","z-index","table-layout","empty-cells","caption-side","list-style-type","list-style-position","pointer-events","user-select","box-sizing","resize","text-align","text-transform","white-space","word-break","word-wrap","font-style","font-weight","font-variant","background-repeat","background-attachment","background-position","border-style","border-collapse","content","page-break-before","page-break-after","page-break-inside"]}calculateTween(e){const t={},r=100*e,n=new Set(this.keyframes.flatMap((e=>Object.keys(e.styles))));for(const e of n)t[e]=this.interpolateProperty(e,r);return t}interpolateProperty(e,t){if(this.discreteProperties.includes(e))return this.interpolateDiscreteProperty(e,t);const r=this.keyframes.filter((t=>e in t.styles));if(0===r.length)return null;const n=r[0],s=r[r.length-1];if(t<n.percent)return this.handleExtrapolation(e,t,n,r[1]||n,"below");if(t>s.percent)return this.handleExtrapolation(e,t,r[r.length-2]||s,s,"above");{const{startFrame:n,endFrame:s}=this.findSurroundingKeyframes(r,t);return this.handleInterpolation(e,t,n,s)}}handleExtrapolation(e,t,r,n,s){const i=(t-r.percent)/(n.percent-r.percent),o=r.styles[e],a=n.styles[e];return"transform"===e?this.extrapolateTransform(o,a,i,s):this.interpolateNumericValues(o,a,i,s)}handleInterpolation(e,t,r,n){const s=(t-r.percent)/(n.percent-r.percent),i=r.styles[e],o=n.styles[e];return"transform"===e?this.interpolateTransform(i,o,s):"filter"===e?this.interpolateFilter(i,o,s):this.interpolateValue(i,o,s)}interpolateFilter(e,t,r){const n=this.parseFilter(e),s=this.parseFilter(t),i=[],o=new Set([...Object.keys(n),...Object.keys(s)]);for(const e of o){const t=n[e]||{value:0,unit:this.getDefaultFilterUnit(e)},o=s[e]||{value:t.value,unit:t.unit},a=this.interpolateValue(t.value,o.value,r);i.push(`${e}(${a}${t.unit})`)}return i.join(" ")}parseFilter(e){const t={},r=/(\w+)\(([^)]+)\)/g;let n;for(;null!==(n=r.exec(e));){const[,e,r]=n,{value:s,unit:i}=this.parseValue(r);t[e]={value:s,unit:i}}return t}getDefaultFilterUnit(e){switch(e){case"blur":return"px";case"hue-rotate":return"deg";default:return"%"}}interpolateTransform(e,t,r){const n=this,s=n.parseTransform(e),i=n.parseTransform(t),o=[],a=new Set([...Object.keys(s),...Object.keys(i)]);for(const e of a){const t=s[e]||(n.isNumericFunction(e)?{value:0,unit:"px"}:{value:0,unit:""}),a=i[e]||{value:t.value,unit:t.unit};if(Array.isArray(t.value)){const s=t.value.map(((e,t)=>{const s=void 0!==a.value[t]?a.value[t]:{value:e.value,unit:e.unit};return`${n.interpolateValue(e.value,s.value,r,!0)}${e.unit||""}`}));o.push(`${e}(${s.join(", ")})`)}else{const s=n.interpolateValue(t.value,a.value,r,!0);o.push(`${e}(${s}${t.unit||""})`)}}return o.join(" ")}findSurroundingKeyframes(e,t){let r=e[0],n=e[e.length-1];for(let s=0;s<e.length-1;s++)if(t>=e[s].percent&&t<=e[s+1].percent){r=e[s],n=e[s+1];break}return{startFrame:r,endFrame:n}}interpolateNumericValues(e,t,r){const n=this.parseValue(e),s=this.parseValue(t);if(n&&s&&n.unit===s.unit){const e=n.value+(s.value-n.value)*r;return`${this.formatNumber(e)}${n.unit||""}`}return r<1?e:t}interpolateValue(e,t,r){return this.isColor(e)&&this.isColor(t)?this.interpolateColor(e,t,r):"number"==typeof e&&"number"==typeof t?this.formatNumber(e+(t-e)*r):this.interpolateNumericValues(e,t,r)}extrapolateTransform(e,t,r,n){const s=this.parseTransform(e),i=this.parseTransform(t),o=[],a=new Set([...Object.keys(s),...Object.keys(i)]);for(const e of a){const t=s[e]||{value:0,unit:"px"},n=i[e]||{value:t.value,unit:t.unit};if(Array.isArray(t.value)){const s=t.value.map(((e,t)=>{const s=n.value[t]||{value:e.value,unit:e.unit};return this.formatNumber(e.value+(s.value-e.value)*r)}));o.push(`${e}(${s.join(", ")})`)}else{const s=this.formatNumber(t.value+(n.value-t.value)*r);o.push(`${e}(${s}${t.unit||""})`)}}return o.join(" ")}parseTransform(e){const t={},r=/(\w+)\(([^)]+)\)/g;let n;for(;null!==(n=r.exec(e));){const[,e,r]=n,s=r.split(/\s*,\s*|\s+/).map((e=>{const t=e.match(/^(-?\d*\.?\d+)(\D*)$/);return t?{value:parseFloat(t[1]),unit:t[2]}:{value:0,unit:""}}));t[e]=s.length>1?s:s[0]}return t}formatNumber(e){return parseFloat(Number(e).toFixed(4)).toString()}interpolateDiscreteProperty(e,t){const r=this.keyframes.filter((t=>e in t.styles));return 0===r.length?null:r.reduce(((e,r)=>r.percent<=t&&r.percent>e.percent?r:e)).styles[e]}setKeyframes(e){this.keyframes=e.sort(((e,t)=>e.percent-t.percent))}isColor(e){return/^(#[0-9A-Fa-f]{6}|rgb|hsl|rgba|hsla)/.test(e)}interpolateColor(e,t,r){const n=this.colorToRGB(e),s=this.colorToRGB(t);return`rgb(${Math.round(n[0]+(s[0]-n[0])*r)},${Math.round(n[1]+(s[1]-n[1])*r)},${Math.round(n[2]+(s[2]-n[2])*r)})`}colorToRGB(e){return e.startsWith("#")?[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)]:[0,0,0]}parseValue(e){if("number"==typeof e)return{value:e,unit:""};const t=String(e).match(/^(-?\d*\.?\d+)(\D*)$/);return t?{value:parseFloat(t[1]),unit:t[2]}:null}};var r=e(t.exports),n={exports:{}};!function(e){var t,r;(t=self.document)&&!t.getElementById("livereloadscript")&&((r=t.createElement("script")).async=1,r.src="//"+(self.location.host||"localhost").split(":")[0]+":35730/livereload.js?snipver=1",r.id="livereloadscript",t.getElementsByTagName("head")[0].appendChild(r)),e.exports=function(){!function(e){class DPEventEmitter{#e;constructor(){this.#e=new Map}on(e,t){if("function"!=typeof t)throw new TypeError("Listener must be a function");const r=this.#e.get(e)||[];return r.includes(t)||r.push(t),this.#e.set(e,r),this}off(e,t){const r=this.#e.get(e);if(!r)return this;const n=r.indexOf(t);return-1!==n&&(r.splice(n,1),0===r.length?this.#e.delete(e):this.#e.set(e,r)),this}emit(e,...t){const r=this.#e.get(e);if(!r||0===r.length)return!1;for(let n=0,s=r.length;n<s;++n)try{r[n].apply(this,t)}catch(t){console.error(`Error in listener for event '${e}':`,t)}return!0}removeAllListeners(e){return e?this.#e.delete(e):this.#e.clear(),this}}e.exports?e.exports=DPEventEmitter:"undefined"!=typeof window&&(window.DPEventEmitter=DPEventEmitter)}({exports:{}});class PhysicsAnimator{constructor({attraction:e=.026,friction:t=.28}={}){if("number"!=typeof e||e<0||e>1)throw new Error("Attraction must be a number between 0 and 1.");if("number"!=typeof t||t<0||t>1)throw new Error("Friction must be a number between 0 and 1.");this.attraction=e,this.friction=t,this.frictionFactor=1-t,this.velocity=0,this.currentValue=0,this.targetValue=0,this.isAnimating=!1,this.prevTime=null}animateTo(e,t,r,n){return new Promise((s=>{this.currentValue=e,this.targetValue=t,this.velocity=r,this.isAnimating=!0,this.prevTime=null;const i=t=>{if(!this.isAnimating)return;if(null===this.prevTime)return this.prevTime=t,void requestAnimationFrame(i);const r=(t-this.prevTime)/16.66;this.prevTime=t;const o=(this.targetValue-this.currentValue)*this.attraction;this.velocity+=o*r,this.velocity*=Math.pow(this.frictionFactor,r),this.currentValue+=this.velocity*r;const a=this.targetValue-e,l=this.currentValue-e;let u=0;if(0!==a&&(u=l/a),n({position:this.currentValue,progress:u}),Math.abs(this.currentValue-this.targetValue)<.01)return this.isAnimating=!1,n({position:this.targetValue,progress:1}),void s();requestAnimationFrame(i)};requestAnimationFrame(i)}))}stop(){this.isAnimating=!1}setAttraction(e){if("number"!=typeof e||e<0||e>1)throw new Error("Attraction must be a number between 0 and 1.");this.attraction=e}setFriction(e){if("number"!=typeof e||e<0||e>1)throw new Error("Friction must be a number between 0 and 1.");this.friction=e,this.frictionFactor=1-e}}return PhysicsAnimator}()}(n);var s=e(n.exports);const i=[{percent:0,styles:{transform:"translateX(0px) translateY(0px) rotate(0deg) scale(1.0)",backgroundColor:"#ff0000",borderWidth:"1px",borderRadius:"0px",filter:"blur(15px)"}},{percent:50,styles:{transform:"translateX(0px) translateY(0px) rotate(0deg) scale(1.0)",backgroundColor:"#ff0000",borderWidth:"1px",borderRadius:"0px",filter:"blur(15px)"}},{percent:100,styles:{transform:"translateX(400px) translateY(400px) rotate(-360deg) scale(2.0)",backgroundColor:"#ff00ff",borderWidth:"10px",borderRadius:"30px",filter:"blur(0px)"}}],o=[{percent:0,styles:{transform:"translateX(400px)  translateY(400px) rotate(-720deg) scale(2.0)",backgroundColor:"#ff00ff",borderWidth:"10px",borderRadius:"30px"}},{percent:100,styles:{transform:"translateX(50px)  translateY(50px) rotate(0deg) scale(0.5)",backgroundColor:"#f0f000",borderWidth:"1px",borderRadius:"0px"}}],a=new s({attraction:.01,friction:.03}),l=new r(i),u=document.getElementById("box");function c({position:e,progress:t}){const r=l.calculateTween(t);p(u,r)}function p(e,t){for(const[r,n]of Object.entries(t))e.style[r]=n}document.getElementById("go").addEventListener("click",(function(e){l.setKeyframes(i),a.animateTo(0,500,20,c).then((()=>{setTimeout((()=>{l.setKeyframes(o),a.animateTo(0,500,50,c)}),100)}))}));const f=new s,h=document.getElementById("panel"),m=new r([{percent:0,styles:{transform:"scale(0.8)",filter:"blur(5px) opacity(0)"}},{percent:100,styles:{transform:"scale(1.0)",filter:"blur(0px) opacity(1)"}}]);function d({position:e,progress:t}){const r=m.calculateTween(t);p(h,r)}console.log("panel",h),setTimeout((function(){f.animateTo(0,500,50,d).then((()=>{console.log("panel done")}))}),1e3)}();
